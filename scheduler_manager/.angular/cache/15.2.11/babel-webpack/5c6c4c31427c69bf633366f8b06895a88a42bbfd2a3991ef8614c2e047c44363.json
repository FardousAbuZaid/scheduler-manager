{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"src/services/task.service\";\nimport * as i2 from \"@angular/common\";\nfunction CalenderComponent_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 16)(1, \"h3\", 17);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 2)(4, \"button\", 3);\n    i0.ɵɵlistener(\"click\", function CalenderComponent_div_7_Template_button_click_4_listener() {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.isMonthView ? ctx_r4.previousMonth() : ctx_r4.previousWeek());\n    });\n    i0.ɵɵtext(5, \" Previous \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"button\", 3);\n    i0.ɵɵlistener(\"click\", function CalenderComponent_div_7_Template_button_click_6_listener() {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r6 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r6.goToToday());\n    });\n    i0.ɵɵtext(7, \" Today \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"button\", 3);\n    i0.ɵɵlistener(\"click\", function CalenderComponent_div_7_Template_button_click_8_listener() {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r7 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r7.isMonthView ? ctx_r7.nextMonth() : ctx_r7.nextWeek());\n    });\n    i0.ɵɵtext(9, \" Next \");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.isMonthView ? ctx_r0.months[ctx_r0.currentMonth] + \" \" + ctx_r0.currentYear : \"Week of \" + ctx_r0.getWeekRange(), \" \");\n    i0.ɵɵadvance(4);\n    i0.ɵɵclassProp(\"active\", ctx_r0.isTodayView);\n  }\n}\nfunction CalenderComponent_th_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const day_r8 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(day_r8);\n  }\n}\nfunction CalenderComponent_tr_13_td_1_div_4_span_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"span\", 23);\n  }\n}\nfunction CalenderComponent_tr_13_td_1_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 21);\n    i0.ɵɵtemplate(1, CalenderComponent_tr_13_td_1_div_4_span_1_Template, 1, 0, \"span\", 22);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const day_r11 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", day_r11.tasks);\n  }\n}\nfunction CalenderComponent_tr_13_td_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r17 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"td\")(1, \"div\", 19);\n    i0.ɵɵlistener(\"click\", function CalenderComponent_tr_13_td_1_Template_div_click_1_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r17);\n      const day_r11 = restoredCtx.$implicit;\n      const ctx_r16 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r16.showTaskPopup(day_r11));\n    });\n    i0.ɵɵelementStart(2, \"span\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(4, CalenderComponent_tr_13_td_1_div_4_Template, 2, 1, \"div\", 20);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const day_r11 = ctx.$implicit;\n    i0.ɵɵclassProp(\"active\", day_r11.isToday);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(day_r11.date.getDate());\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", day_r11.tasks.length > 0);\n  }\n}\nfunction CalenderComponent_tr_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\");\n    i0.ɵɵtemplate(1, CalenderComponent_tr_13_td_1_Template, 5, 4, \"td\", 18);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const week_r9 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", week_r9);\n  }\n}\nfunction CalenderComponent_li_25_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const task_r18 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate2(\" Start: \", task_r18.startTime, \" - End: \", task_r18.endTime, \" \");\n  }\n}\nconst _c0 = function (a0) {\n  return {\n    show: a0\n  };\n};\nconst _c1 = function (a0) {\n  return {\n    display: a0\n  };\n};\nexport class CalenderComponent {\n  constructor(taskService) {\n    this.taskService = taskService;\n    this.tasks = [];\n    this.daysOfWeek = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];\n    this.months = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];\n    this.currentMonth = new Date().getMonth();\n    this.currentYear = new Date().getFullYear();\n    this.currentWeekStart = this.getStartOfWeek(new Date());\n    this.calendar = [];\n    this.isMonthView = true;\n    this.activeNavButton = '';\n    this.showPopup = false;\n    this.selectedDay = null;\n    this.tasks = [];\n  }\n  ngOnInit() {\n    this.getTasks();\n  }\n  getTasks() {\n    this.taskService.getTasks().subscribe({\n      next: data => {\n        this.tasks = data;\n        this.generateCalendar();\n      },\n      error: err => console.error('Error fetching tasks', err)\n    });\n  }\n  generateCalendar() {\n    if (this.isMonthView) {\n      this.generateMonthView();\n    } else {\n      this.generateWeekView();\n    }\n  }\n  generateMonthView() {\n    const firstDay = new Date(this.currentYear, this.currentMonth, 1).getDay();\n    const daysInMonth = new Date(this.currentYear, this.currentMonth + 1, 0).getDate();\n    const today = new Date();\n    let calendar = [];\n    let week = [];\n    for (let i = 0; i < firstDay; i++) {\n      week.push({\n        date: new Date(this.currentYear, this.currentMonth, -firstDay + i + 1),\n        isToday: false,\n        tasks: []\n      });\n    }\n    for (let day = 1; day <= daysInMonth; day++) {\n      const date = new Date(this.currentYear, this.currentMonth, day);\n      const isToday = date.toDateString() === today.toDateString();\n      const tasks = this.tasks.filter(task => new Date(task.startTime).toDateString() === date.toDateString());\n      week.push({\n        date,\n        isToday,\n        tasks\n      });\n      if (week.length === 7) {\n        calendar.push(week);\n        week = [];\n      }\n    }\n    if (week.length > 0) {\n      calendar.push(week);\n    }\n    this.calendar = calendar;\n  }\n  generateWeekView() {\n    const today = new Date();\n    const weekStart = this.currentWeekStart;\n    const weekEnd = new Date(weekStart);\n    weekEnd.setDate(weekEnd.getDate() + 6);\n    let calendar = [[]];\n    let currentDate = new Date(weekStart);\n    for (let i = 0; i < 7; i++) {\n      const date = new Date(currentDate);\n      const isToday = date.toDateString() === today.toDateString();\n      const tasks = this.tasks.filter(task => new Date(task.startTime).toDateString() === date.toDateString());\n      calendar[0].push({\n        date,\n        isToday,\n        tasks\n      });\n      currentDate.setDate(currentDate.getDate() + 1);\n    }\n    this.calendar = calendar;\n  }\n  getStartOfWeek(date) {\n    const day = date.getDay();\n    const diff = date.getDate() - day + (day === 0 ? -6 : 1);\n    return new Date(date.setDate(diff));\n  }\n  previousMonth() {\n    this.activeNavButton = 'previous';\n    if (this.currentMonth === 0) {\n      this.currentMonth = 11;\n      this.currentYear--;\n    } else {\n      this.currentMonth--;\n    }\n    this.generateCalendar();\n  }\n  nextMonth() {\n    this.activeNavButton = 'next';\n    if (this.currentMonth === 11) {\n      this.currentMonth = 0;\n      this.currentYear++;\n    } else {\n      this.currentMonth++;\n    }\n    this.generateCalendar();\n  }\n  previousWeek() {\n    this.activeNavButton = 'previous';\n    this.currentWeekStart.setDate(this.currentWeekStart.getDate() - 7);\n    this.generateCalendar();\n  }\n  nextWeek() {\n    this.activeNavButton = 'next';\n    this.currentWeekStart.setDate(this.currentWeekStart.getDate() + 7);\n    this.generateCalendar();\n  }\n  getWeekRange() {\n    const start = this.currentWeekStart;\n    const end = new Date(start);\n    end.setDate(start.getDate() + 6);\n    return `${start.getDate()} ${this.months[start.getMonth()]} - ${end.getDate()} ${this.months[end.getMonth()]}`;\n  }\n  goToToday() {\n    this.activeNavButton = 'today';\n    const today = new Date();\n    this.currentMonth = today.getMonth();\n    this.currentYear = today.getFullYear();\n    this.currentWeekStart = this.getStartOfWeek(today);\n    this.generateCalendar();\n  }\n  showTaskPopup(day) {\n    this.selectedDay = day;\n    this.showPopup = true;\n  }\n  closePopup() {\n    this.showPopup = false;\n  }\n  switchToMonthView() {\n    this.isMonthView = true;\n    this.generateCalendar();\n  }\n  switchToWeekView() {\n    this.isMonthView = false;\n    this.currentWeekStart = this.getStartOfWeek(new Date());\n    this.generateCalendar();\n  }\n  static #_ = this.ɵfac = function CalenderComponent_Factory(t) {\n    return new (t || CalenderComponent)(i0.ɵɵdirectiveInject(i1.TaskService));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: CalenderComponent,\n    selectors: [[\"app-calender\"]],\n    decls: 29,\n    vars: 18,\n    consts: [[1, \"container\", \"mt-4\"], [1, \"d-flex\", \"justify-content-between\", \"align-items-center\", \"mb-3\"], [1, \"btn-group\"], [1, \"btn\", \"btn-outline-primary\", 3, \"click\"], [\"class\", \"d-flex align-items-center justify-content-center\", 4, \"ngIf\"], [1, \"table\", \"table-bordered\"], [4, \"ngFor\", \"ngForOf\"], [\"tabindex\", \"-1\", \"role\", \"dialog\", 1, \"modal\", \"fade\", 3, \"ngClass\", \"ngStyle\"], [\"role\", \"document\", 1, \"modal-dialog\"], [1, \"modal-content\"], [1, \"modal-header\"], [1, \"modal-title\"], [\"type\", \"button\", 1, \"close\", 3, \"click\"], [1, \"modal-body\"], [1, \"modal-footer\"], [\"type\", \"button\", 1, \"btn\", \"btn-secondary\", 3, \"click\"], [1, \"d-flex\", \"align-items-center\", \"justify-content-center\"], [1, \"mx-3\"], [3, \"active\", 4, \"ngFor\", \"ngForOf\"], [3, \"click\"], [\"class\", \"dots mt-2\", 4, \"ngIf\"], [1, \"dots\", \"mt-2\"], [\"class\", \"dot\", 4, \"ngFor\", \"ngForOf\"], [1, \"dot\"]],\n    template: function CalenderComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"button\", 3);\n        i0.ɵɵlistener(\"click\", function CalenderComponent_Template_button_click_3_listener() {\n          return ctx.switchToMonthView();\n        });\n        i0.ɵɵtext(4, \" Month View \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(5, \"button\", 3);\n        i0.ɵɵlistener(\"click\", function CalenderComponent_Template_button_click_5_listener() {\n          return ctx.switchToWeekView();\n        });\n        i0.ɵɵtext(6, \" Week View \");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵtemplate(7, CalenderComponent_div_7_Template, 10, 3, \"div\", 4);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(8, \"table\", 5)(9, \"thead\")(10, \"tr\");\n        i0.ɵɵtemplate(11, CalenderComponent_th_11_Template, 2, 1, \"th\", 6);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(12, \"tbody\");\n        i0.ɵɵtemplate(13, CalenderComponent_tr_13_Template, 2, 1, \"tr\", 6);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(14, \"div\", 7)(15, \"div\", 8)(16, \"div\", 9)(17, \"div\", 10)(18, \"h5\", 11);\n        i0.ɵɵtext(19);\n        i0.ɵɵpipe(20, \"date\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(21, \"button\", 12);\n        i0.ɵɵlistener(\"click\", function CalenderComponent_Template_button_click_21_listener() {\n          return ctx.closePopup();\n        });\n        i0.ɵɵtext(22, \" \\u00D7 \");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(23, \"div\", 13)(24, \"ul\");\n        i0.ɵɵtemplate(25, CalenderComponent_li_25_Template, 2, 2, \"li\", 6);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(26, \"div\", 14)(27, \"button\", 15);\n        i0.ɵɵlistener(\"click\", function CalenderComponent_Template_button_click_27_listener() {\n          return ctx.closePopup();\n        });\n        i0.ɵɵtext(28, \" Close \");\n        i0.ɵɵelementEnd()()()()()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(3);\n        i0.ɵɵclassProp(\"active\", ctx.isMonthView);\n        i0.ɵɵadvance(2);\n        i0.ɵɵclassProp(\"active\", !ctx.isMonthView);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.isMonthView || !ctx.isMonthView);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngForOf\", ctx.daysOfWeek);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngForOf\", ctx.calendar);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(14, _c0, ctx.showPopup))(\"ngStyle\", i0.ɵɵpureFunction1(16, _c1, ctx.showPopup ? \"block\" : \"none\"));\n        i0.ɵɵadvance(5);\n        i0.ɵɵtextInterpolate1(\" Tasks for \", i0.ɵɵpipeBind2(20, 11, ctx.selectedDay == null ? null : ctx.selectedDay.date, \"fullDate\"), \" \");\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"ngForOf\", ctx.selectedDay == null ? null : ctx.selectedDay.tasks);\n      }\n    },\n    dependencies: [i2.NgClass, i2.NgForOf, i2.NgIf, i2.NgStyle, i2.DatePipe],\n    styles: [\".dots[_ngcontent-%COMP%] {\\r\\n  text-align: center;\\r\\n}\\r\\n\\r\\n.dot[_ngcontent-%COMP%] {\\r\\n  display: inline-block;\\r\\n  width: 10px;\\r\\n  height: 10px;\\r\\n  background-color: #007bff;\\r\\n  border-radius: 50%;\\r\\n  margin-right: 2px;\\r\\n}\\r\\n\\r\\ntd[_ngcontent-%COMP%] {\\r\\n  height: 100px;\\r\\n  vertical-align: top;\\r\\n  text-align: center;\\r\\n  position: relative;\\r\\n  cursor: pointer;\\r\\n}\\r\\n\\r\\ntd.active[_ngcontent-%COMP%] {\\r\\n  background-color: rgb(228, 247, 255);\\r\\n}\\r\\n\\r\\n.modal[_ngcontent-%COMP%] {\\r\\n  display: block;\\r\\n  background-color: rgba(0, 0, 0, 0.5);\\r\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY29tcG9uZW50cy9jYWxlbmRlci9jYWxlbmRlci5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0Usa0JBQWtCO0FBQ3BCOztBQUVBO0VBQ0UscUJBQXFCO0VBQ3JCLFdBQVc7RUFDWCxZQUFZO0VBQ1oseUJBQXlCO0VBQ3pCLGtCQUFrQjtFQUNsQixpQkFBaUI7QUFDbkI7O0FBRUE7RUFDRSxhQUFhO0VBQ2IsbUJBQW1CO0VBQ25CLGtCQUFrQjtFQUNsQixrQkFBa0I7RUFDbEIsZUFBZTtBQUNqQjs7QUFFQTtFQUNFLG9DQUFvQztBQUN0Qzs7QUFFQTtFQUNFLGNBQWM7RUFDZCxvQ0FBb0M7QUFDdEMiLCJzb3VyY2VzQ29udGVudCI6WyIuZG90cyB7XHJcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xyXG59XHJcblxyXG4uZG90IHtcclxuICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XHJcbiAgd2lkdGg6IDEwcHg7XHJcbiAgaGVpZ2h0OiAxMHB4O1xyXG4gIGJhY2tncm91bmQtY29sb3I6ICMwMDdiZmY7XHJcbiAgYm9yZGVyLXJhZGl1czogNTAlO1xyXG4gIG1hcmdpbi1yaWdodDogMnB4O1xyXG59XHJcblxyXG50ZCB7XHJcbiAgaGVpZ2h0OiAxMDBweDtcclxuICB2ZXJ0aWNhbC1hbGlnbjogdG9wO1xyXG4gIHRleHQtYWxpZ246IGNlbnRlcjtcclxuICBwb3NpdGlvbjogcmVsYXRpdmU7XHJcbiAgY3Vyc29yOiBwb2ludGVyO1xyXG59XHJcblxyXG50ZC5hY3RpdmUge1xyXG4gIGJhY2tncm91bmQtY29sb3I6IHJnYigyMjgsIDI0NywgMjU1KTtcclxufVxyXG5cclxuLm1vZGFsIHtcclxuICBkaXNwbGF5OiBibG9jaztcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuNSk7XHJcbn1cclxuIl0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n  });\n}","map":{"version":3,"mappings":"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","names":["i0","ctx_r4","ctx_r7","CalenderComponent","constructor","taskService","Date","getMonth","getFullYear","getStartOfWeek","tasks","ngOnInit","getTasks","subscribe","next","data","generateCalendar","error","err","console","isMonthView","generateMonthView","generateWeekView","firstDay","currentYear","currentMonth","getDay","daysInMonth","getDate","today","calendar","week","i","push","date","isToday","day","toDateString","filter","task","startTime","length","weekStart","currentWeekStart","weekEnd","setDate","currentDate","diff","previousMonth","activeNavButton","nextMonth","previousWeek","nextWeek","getWeekRange","start","end","months","goToToday","showTaskPopup","selectedDay","showPopup","closePopup","switchToMonthView","switchToWeekView","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\Users\\fardo\\scheduler_manager\\src\\app\\components\\calender\\calender.component.html","C:\\Users\\fardo\\scheduler_manager\\src\\app\\components\\calender\\calender.component.ts"],"sourcesContent":["<div class=\"container mt-4\">\n  <div class=\"d-flex justify-content-between align-items-center mb-3\">\n    <div class=\"btn-group\">\n      <button\n        class=\"btn btn-outline-primary\"\n        (click)=\"switchToMonthView()\"\n        [class.active]=\"isMonthView\"\n      >\n        Month View\n      </button>\n      <button\n        class=\"btn btn-outline-primary\"\n        (click)=\"switchToWeekView()\"\n        [class.active]=\"!isMonthView\"\n      >\n        Week View\n      </button>\n    </div>\n\n    <div\n      *ngIf=\"isMonthView || !isMonthView\"\n      class=\"d-flex align-items-center justify-content-center\"\n    >\n      <h3 class=\"mx-3\">\n        {{\n          isMonthView\n            ? months[currentMonth] + \" \" + currentYear\n            : \"Week of \" + getWeekRange()\n        }}\n      </h3>\n      <div class=\"btn-group\">\n        <button\n          class=\"btn btn-outline-primary\"\n          (click)=\"isMonthView ? previousMonth() : previousWeek()\"\n        >\n          Previous\n        </button>\n\n        <button\n          class=\"btn btn-outline-primary\"\n          (click)=\"goToToday()\"\n          [class.active]=\"isTodayView\"\n        >\n          Today\n        </button>\n        <button\n          class=\"btn btn-outline-primary\"\n          (click)=\"isMonthView ? nextMonth() : nextWeek()\"\n        >\n          Next\n        </button>\n      </div>\n    </div>\n  </div>\n\n  <table class=\"table table-bordered\">\n    <thead>\n      <tr>\n        <th *ngFor=\"let day of daysOfWeek\">{{ day }}</th>\n      </tr>\n    </thead>\n    <tbody>\n      <tr *ngFor=\"let week of calendar\">\n        <td *ngFor=\"let day of week\" [class.active]=\"day.isToday\">\n          <div (click)=\"showTaskPopup(day)\">\n            <span>{{ day.date.getDate() }}</span>\n            <div *ngIf=\"day.tasks.length > 0\" class=\"dots mt-2\">\n              <span *ngFor=\"let task of day.tasks\" class=\"dot\"></span>\n            </div>\n          </div>\n        </td>\n      </tr>\n    </tbody>\n  </table>\n\n  <div\n    class=\"modal fade\"\n    tabindex=\"-1\"\n    role=\"dialog\"\n    [ngClass]=\"{ show: showPopup }\"\n    [ngStyle]=\"{ display: showPopup ? 'block' : 'none' }\"\n  >\n    <div class=\"modal-dialog\" role=\"document\">\n      <div class=\"modal-content\">\n        <div class=\"modal-header\">\n          <h5 class=\"modal-title\">\n            Tasks for {{ selectedDay?.date | date : \"fullDate\" }}\n          </h5>\n          <button type=\"button\" class=\"close\" (click)=\"closePopup()\">\n            &times;\n          </button>\n        </div>\n        <div class=\"modal-body\">\n          <ul>\n            <li *ngFor=\"let task of selectedDay?.tasks\">\n              Start: {{ task.startTime }} - End: {{ task.endTime }}\n            </li>\n          </ul>\n        </div>\n        <div class=\"modal-footer\">\n          <button\n            type=\"button\"\n            class=\"btn btn-secondary\"\n            (click)=\"closePopup()\"\n          >\n            Close\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n","import { Component, OnInit } from '@angular/core';\nimport { ITask } from 'src/interfaces/ITask';\nimport { TaskService } from 'src/services/task.service';\n\ninterface Day {\n  date: Date;\n  isToday: boolean;\n  tasks: ITask[];\n}\n\n@Component({\n  selector: 'app-calender',\n  templateUrl: './calender.component.html',\n  styleUrls: ['./calender.component.css'],\n})\nexport class CalenderComponent implements OnInit {\n  protected tasks: ITask[] = [];\n\n  constructor(private taskService: TaskService) {\n    this.tasks = [];\n  }\n  daysOfWeek = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];\n  months = [\n    'January',\n    'February',\n    'March',\n    'April',\n    'May',\n    'June',\n    'July',\n    'August',\n    'September',\n    'October',\n    'November',\n    'December',\n  ];\n\n  currentMonth = new Date().getMonth();\n  currentYear = new Date().getFullYear();\n  currentWeekStart: Date = this.getStartOfWeek(new Date());\n  calendar: Day[][] = [];\n  isMonthView = true;\n  activeNavButton: string = ''; \n\n\n  showPopup = false;\n  selectedDay: Day | null = null;\n\n  ngOnInit(): void {\n    this.getTasks();\n  }\n  getTasks() {\n    this.taskService.getTasks().subscribe({\n      next: (data) => {\n        this.tasks = data;\n        this.generateCalendar();\n      },\n      error: (err) => console.error('Error fetching tasks', err),\n    });\n  }\n  generateCalendar() {\n    if (this.isMonthView) {\n      this.generateMonthView();\n    } else {\n      this.generateWeekView();\n    }\n  }\n\n  generateMonthView() {\n    const firstDay = new Date(this.currentYear, this.currentMonth, 1).getDay();\n    const daysInMonth = new Date(\n      this.currentYear,\n      this.currentMonth + 1,\n      0\n    ).getDate();\n    const today = new Date();\n    let calendar: Day[][] = [];\n    let week: Day[] = [];\n\n    for (let i = 0; i < firstDay; i++) {\n      week.push({\n        date: new Date(this.currentYear, this.currentMonth, -firstDay + i + 1),\n        isToday: false,\n        tasks: [],\n      });\n    }\n\n    for (let day = 1; day <= daysInMonth; day++) {\n      const date = new Date(this.currentYear, this.currentMonth, day);\n      const isToday = date.toDateString() === today.toDateString();\n      const tasks = this.tasks.filter(\n        (task) =>\n          new Date(task.startTime).toDateString() === date.toDateString()\n      );\n\n      week.push({ date, isToday, tasks });\n\n      if (week.length === 7) {\n        calendar.push(week);\n        week = [];\n      }\n    }\n\n    if (week.length > 0) {\n      calendar.push(week);\n    }\n\n    this.calendar = calendar;\n  }\n\n  generateWeekView() {\n    const today = new Date();\n    const weekStart = this.currentWeekStart;\n    const weekEnd = new Date(weekStart);\n    weekEnd.setDate(weekEnd.getDate() + 6);\n\n    let calendar: Day[][] = [[]];\n    let currentDate = new Date(weekStart);\n\n    for (let i = 0; i < 7; i++) {\n      const date = new Date(currentDate);\n      const isToday = date.toDateString() === today.toDateString();\n      const tasks = this.tasks.filter(\n        (task) =>\n          new Date(task.startTime).toDateString() === date.toDateString()\n      );\n      calendar[0].push({ date, isToday, tasks });\n      currentDate.setDate(currentDate.getDate() + 1);\n    }\n\n    this.calendar = calendar;\n  }\n\n  getStartOfWeek(date: Date): Date {\n    const day = date.getDay();\n    const diff = date.getDate() - day + (day === 0 ? -6 : 1);\n    return new Date(date.setDate(diff));\n  }\n\n  previousMonth() {\n    this.activeNavButton = 'previous';\n    if (this.currentMonth === 0) {\n      this.currentMonth = 11;\n      this.currentYear--;\n    } else {\n      this.currentMonth--;\n    }\n    this.generateCalendar();\n  }\n\n  nextMonth() {\n    this.activeNavButton = 'next';\n    if (this.currentMonth === 11) {\n      this.currentMonth = 0;\n      this.currentYear++;\n    } else {\n      this.currentMonth++;\n    }\n    this.generateCalendar();\n  }\n\n  previousWeek() {\n    this.activeNavButton = 'previous';\n    this.currentWeekStart.setDate(this.currentWeekStart.getDate() - 7);\n    this.generateCalendar();\n  }\n\n  nextWeek() {\n    this.activeNavButton = 'next';\n    this.currentWeekStart.setDate(this.currentWeekStart.getDate() + 7);\n    this.generateCalendar();\n  }\n\n  getWeekRange(): string {\n    const start = this.currentWeekStart;\n    const end = new Date(start);\n    end.setDate(start.getDate() + 6);\n    return `${start.getDate()} ${\n      this.months[start.getMonth()]\n    } - ${end.getDate()} ${this.months[end.getMonth()]}`;\n  }\n\n  goToToday() {\n    this.activeNavButton = 'today';\n    const today = new Date();\n    this.currentMonth = today.getMonth();\n    this.currentYear = today.getFullYear();\n    this.currentWeekStart = this.getStartOfWeek(today);\n    this.generateCalendar();\n  }\n\n  showTaskPopup(day: Day) {\n    this.selectedDay = day;\n    this.showPopup = true;\n  }\n\n  closePopup() {\n    this.showPopup = false;\n  }\n\n  switchToMonthView() {\n    this.isMonthView = true;\n    this.generateCalendar();\n  }\n\n  switchToWeekView() {\n    this.isMonthView = false;\n    this.currentWeekStart = this.getStartOfWeek(new Date());\n    this.generateCalendar();\n  }\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}