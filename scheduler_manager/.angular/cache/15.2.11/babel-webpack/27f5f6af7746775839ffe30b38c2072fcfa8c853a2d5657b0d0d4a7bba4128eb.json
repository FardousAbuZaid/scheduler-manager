{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nlet CalenderComponent = class CalenderComponent {\n  constructor(taskService) {\n    this.taskService = taskService;\n    this.tasks = [];\n    this.daysOfWeek = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];\n    this.months = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];\n    this.currentMonth = new Date().getMonth();\n    this.currentYear = new Date().getFullYear();\n    this.currentWeekStart = this.getStartOfWeek(new Date());\n    this.calendar = [];\n    this.isMonthView = true;\n    this.showPopup = false;\n    this.selectedDay = null;\n    this.tasks = [{\n      id: '1',\n      startTime: '2024-09-02 14:00',\n      endTime: '2024-09-02 16:00'\n    }, {\n      id: '2',\n      startTime: '2024-09-16 09:00',\n      endTime: '2024-09-16 10:00'\n    }];\n    this.tasks = [];\n  }\n  ngOnInit() {\n    this.generateCalendar();\n  }\n  getTasks() {\n    this.taskService.getTasks().subscribe({\n      next: data => this.tasks = data,\n      error: err => console.error('Error fetching tasks', err)\n    });\n  }\n  generateCalendar() {\n    if (this.isMonthView) {\n      this.generateMonthView();\n    } else {\n      this.generateWeekView();\n    }\n  }\n  generateMonthView() {\n    const firstDay = new Date(this.currentYear, this.currentMonth, 1).getDay();\n    const daysInMonth = new Date(this.currentYear, this.currentMonth + 1, 0).getDate();\n    const today = new Date();\n    let calendar = [];\n    let week = [];\n    for (let i = 0; i < firstDay; i++) {\n      week.push({\n        date: new Date(this.currentYear, this.currentMonth, -firstDay + i + 1),\n        isToday: false,\n        tasks: []\n      });\n    }\n    for (let day = 1; day <= daysInMonth; day++) {\n      const date = new Date(this.currentYear, this.currentMonth, day);\n      const isToday = date.toDateString() === today.toDateString();\n      const tasks = this.tasks.filter(task => new Date(task.startTime).toDateString() === date.toDateString());\n      week.push({\n        date,\n        isToday,\n        tasks\n      });\n      if (week.length === 7) {\n        calendar.push(week);\n        week = [];\n      }\n    }\n    if (week.length > 0) {\n      calendar.push(week);\n    }\n    this.calendar = calendar;\n  }\n  generateWeekView() {\n    const today = new Date();\n    const weekStart = this.currentWeekStart;\n    const weekEnd = new Date(weekStart);\n    weekEnd.setDate(weekEnd.getDate() + 6);\n    let calendar = [[]];\n    let currentDate = new Date(weekStart);\n    for (let i = 0; i < 7; i++) {\n      const date = new Date(currentDate);\n      const isToday = date.toDateString() === today.toDateString();\n      const tasks = this.tasks.filter(task => new Date(task.startTime).toDateString() === date.toDateString());\n      calendar[0].push({\n        date,\n        isToday,\n        tasks\n      });\n      currentDate.setDate(currentDate.getDate() + 1);\n    }\n    this.calendar = calendar;\n  }\n  getStartOfWeek(date) {\n    const day = date.getDay();\n    const diff = date.getDate() - day + (day === 0 ? -6 : 1); // Adjust for Sunday start\n    return new Date(date.setDate(diff));\n  }\n  previousMonth() {\n    if (this.currentMonth === 0) {\n      this.currentMonth = 11;\n      this.currentYear--;\n    } else {\n      this.currentMonth--;\n    }\n    this.generateCalendar();\n  }\n  nextMonth() {\n    if (this.currentMonth === 11) {\n      this.currentMonth = 0;\n      this.currentYear++;\n    } else {\n      this.currentMonth++;\n    }\n    this.generateCalendar();\n  }\n  previousWeek() {\n    this.currentWeekStart.setDate(this.currentWeekStart.getDate() - 7);\n    this.generateCalendar();\n  }\n  nextWeek() {\n    this.currentWeekStart.setDate(this.currentWeekStart.getDate() + 7);\n    this.generateCalendar();\n  }\n  getWeekRange() {\n    const start = this.currentWeekStart;\n    const end = new Date(start);\n    end.setDate(start.getDate() + 6);\n    return `${start.getDate()} ${this.months[start.getMonth()]} - ${end.getDate()} ${this.months[end.getMonth()]}`;\n  }\n  showTaskPopup(day) {\n    this.selectedDay = day;\n    this.showPopup = true;\n  }\n  closePopup() {\n    this.showPopup = false;\n    console.log('this.showPopup', this.showPopup);\n  }\n  switchToMonthView() {\n    this.isMonthView = true;\n    this.generateCalendar();\n  }\n  switchToWeekView() {\n    this.isMonthView = false;\n    this.currentWeekStart = this.getStartOfWeek(new Date());\n    this.generateCalendar();\n  }\n};\nCalenderComponent = __decorate([Component({\n  selector: 'app-calender',\n  templateUrl: './calender.component.html',\n  styleUrls: ['./calender.component.css']\n})], CalenderComponent);\nexport { CalenderComponent };","map":{"version":3,"mappings":"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","names":["Component","CalenderComponent","constructor","taskService","Date","getMonth","getFullYear","getStartOfWeek","id","startTime","endTime","tasks","ngOnInit","generateCalendar","getTasks","subscribe","next","data","error","err","console","isMonthView","generateMonthView","generateWeekView","firstDay","currentYear","currentMonth","getDay","daysInMonth","getDate","today","calendar","week","i","push","date","isToday","day","toDateString","filter","task","length","weekStart","currentWeekStart","weekEnd","setDate","currentDate","diff","previousMonth","nextMonth","previousWeek","nextWeek","getWeekRange","start","end","months","showTaskPopup","selectedDay","showPopup","closePopup","log","switchToMonthView","switchToWeekView","selector","templateUrl","styleUrls"],"sourceRoot":"","sources":["C:\\Users\\fardo\\scheduler_manager\\src\\app\\components\\calender\\calender.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\n\ninterface Task {\n  id: string;\n  startTime: string;\n  endTime: string;\n}\n\ninterface Day {\n  date: Date;\n  isToday: boolean;\n  tasks: Task[];\n}\n@Component({\n  selector: 'app-calender',\n  templateUrl: './calender.component.html',\n  styleUrls: ['./calender.component.css'],\n})\nexport class CalenderComponent {\n  protected tasks: ITask[] = [];\n\n  constructor(private taskService: TaskService) {\n    this.tasks = [];\n  }\n  daysOfWeek = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];\n  months = [\n    'January',\n    'February',\n    'March',\n    'April',\n    'May',\n    'June',\n    'July',\n    'August',\n    'September',\n    'October',\n    'November',\n    'December',\n  ];\n\n  currentMonth = new Date().getMonth();\n  currentYear = new Date().getFullYear();\n  currentWeekStart: Date = this.getStartOfWeek(new Date());\n  calendar: Day[][] = [];\n  isMonthView = true;\n\n  showPopup = false;\n  selectedDay: Day | null = null;\n\n  tasks: Task[] = [\n    { id: '1', startTime: '2024-09-02 14:00', endTime: '2024-09-02 16:00' },\n    { id: '2', startTime: '2024-09-16 09:00', endTime: '2024-09-16 10:00' },\n  ];\n\n  ngOnInit() {\n    this.generateCalendar();\n  }\n  getTasks() {\n    this.taskService.getTasks().subscribe({\n      next: (data) => (this.tasks = data),\n      error: (err) => console.error('Error fetching tasks', err),\n    });\n  }\n  generateCalendar() {\n    if (this.isMonthView) {\n      this.generateMonthView();\n    } else {\n      this.generateWeekView();\n    }\n  }\n\n  generateMonthView() {\n    const firstDay = new Date(this.currentYear, this.currentMonth, 1).getDay();\n    const daysInMonth = new Date(\n      this.currentYear,\n      this.currentMonth + 1,\n      0\n    ).getDate();\n    const today = new Date();\n    let calendar: Day[][] = [];\n    let week: Day[] = [];\n\n    for (let i = 0; i < firstDay; i++) {\n      week.push({\n        date: new Date(this.currentYear, this.currentMonth, -firstDay + i + 1),\n        isToday: false,\n        tasks: [],\n      });\n    }\n\n    for (let day = 1; day <= daysInMonth; day++) {\n      const date = new Date(this.currentYear, this.currentMonth, day);\n      const isToday = date.toDateString() === today.toDateString();\n      const tasks = this.tasks.filter(\n        (task) =>\n          new Date(task.startTime).toDateString() === date.toDateString()\n      );\n\n      week.push({ date, isToday, tasks });\n\n      if (week.length === 7) {\n        calendar.push(week);\n        week = [];\n      }\n    }\n\n    if (week.length > 0) {\n      calendar.push(week);\n    }\n\n    this.calendar = calendar;\n  }\n\n  generateWeekView() {\n    const today = new Date();\n    const weekStart = this.currentWeekStart;\n    const weekEnd = new Date(weekStart);\n    weekEnd.setDate(weekEnd.getDate() + 6);\n\n    let calendar: Day[][] = [[]];\n    let currentDate = new Date(weekStart);\n\n    for (let i = 0; i < 7; i++) {\n      const date = new Date(currentDate);\n      const isToday = date.toDateString() === today.toDateString();\n      const tasks = this.tasks.filter(\n        (task) =>\n          new Date(task.startTime).toDateString() === date.toDateString()\n      );\n      calendar[0].push({ date, isToday, tasks });\n      currentDate.setDate(currentDate.getDate() + 1);\n    }\n\n    this.calendar = calendar;\n  }\n\n  getStartOfWeek(date: Date): Date {\n    const day = date.getDay();\n    const diff = date.getDate() - day + (day === 0 ? -6 : 1); // Adjust for Sunday start\n    return new Date(date.setDate(diff));\n  }\n\n  previousMonth() {\n    if (this.currentMonth === 0) {\n      this.currentMonth = 11;\n      this.currentYear--;\n    } else {\n      this.currentMonth--;\n    }\n    this.generateCalendar();\n  }\n\n  nextMonth() {\n    if (this.currentMonth === 11) {\n      this.currentMonth = 0;\n      this.currentYear++;\n    } else {\n      this.currentMonth++;\n    }\n    this.generateCalendar();\n  }\n\n  previousWeek() {\n    this.currentWeekStart.setDate(this.currentWeekStart.getDate() - 7);\n    this.generateCalendar();\n  }\n\n  nextWeek() {\n    this.currentWeekStart.setDate(this.currentWeekStart.getDate() + 7);\n    this.generateCalendar();\n  }\n\n  getWeekRange(): string {\n    const start = this.currentWeekStart;\n    const end = new Date(start);\n    end.setDate(start.getDate() + 6);\n    return `${start.getDate()} ${\n      this.months[start.getMonth()]\n    } - ${end.getDate()} ${this.months[end.getMonth()]}`;\n  }\n\n  showTaskPopup(day: Day) {\n    this.selectedDay = day;\n    this.showPopup = true;\n  }\n\n  closePopup() {\n    this.showPopup = false;\n    console.log('this.showPopup', this.showPopup);\n  }\n\n  switchToMonthView() {\n    this.isMonthView = true;\n    this.generateCalendar();\n  }\n\n  switchToWeekView() {\n    this.isMonthView = false;\n    this.currentWeekStart = this.getStartOfWeek(new Date());\n    this.generateCalendar();\n  }\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}